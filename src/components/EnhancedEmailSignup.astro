---
// This component can be used in multiple places on the homepage
// Props to customize the messaging and placement
interface Props {
  variant?: 'hero' | 'inline' | 'cta';
  title?: string;
  subtitle?: string;
  showChecklist?: boolean;
}

const { 
  variant = 'cta', 
  title = "Stay Connected with Daily Lessons",
  subtitle = "Get your daily spiritual boost delivered to your inbox, plus a free checklist to start your journey",
  showChecklist = true 
} = Astro.props;
---

<!-- ENHANCED EMAIL SIGNUP -->
<div class="w-full">
  {variant === 'hero' && (
    <div class="text-center">
      <h2 class="font-serif text-3xl md:text-4xl font-bold text-gray-900 mb-4">{title}</h2>
      <p class="font-sans text-lg text-gray-700 mb-6 max-w-2xl mx-auto">{subtitle}</p>
      
      {showChecklist && (
        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6 max-w-lg mx-auto">
          <div class="flex items-center gap-3">
            <svg class="w-6 h-6 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="font-sans text-sm text-green-800 text-center">
              <strong>Free Bonus:</strong> "5 Daily Reflections for Spiritual Growth" checklist
            </span>
          </div>
          <div class="mt-3">
            <a 
              href="/checklist" 
              class="text-green-700 hover:text-green-800 text-sm underline font-medium"
              target="_blank"
            >
              Preview the checklist â†’
            </a>
          </div>
        </div>
      )}
    </div>
  )}

  <form
    action="https://buttondown.com/api/emails/embed-subscribe/sabeel"
    method="POST"
    target="popupwindow"
    onsubmit="window.open('https://buttondown.com/sabeel', 'popupwindow')"
    class="w-full flex flex-col sm:flex-row gap-4"
  >
    <input
      type="email"
      name="email"
      placeholder="Your Email Address"
      required
      class="font-sans flex-1 px-5 py-3 rounded-full border border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
    />
    <button 
      type="submit" 
      class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-8 rounded-full text-lg transition duration-300 shadow-lg whitespace-nowrap"
    >
      {variant === 'hero' ? 'Get Started' : 'Subscribe'}
    </button>
  </form>
  
  <p class="font-sans text-sm text-gray-500 text-center mt-3">
    We respect your privacy. No spam, ever.
  </p>
  
  {showChecklist && variant !== 'hero' && (
    <div class="text-center mt-4">
      <a 
        href="/checklist" 
        class="text-green-600 hover:text-green-700 text-sm font-medium inline-flex items-center gap-1"
        target="_blank"
      >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
        </svg>
        See what you'll get
      </a>
    </div>
  )}
</div>

<!-- INLINE VARIANT STYLING -->
{variant === 'inline' && (
  <style>
    .inline-signup {
      background: linear-gradient(135deg, #f0f9ff 0%, #ecfdf5 100%);
      border: 1px solid #d1fae5;
      border-radius: 1rem;
      padding: 1.5rem;
      margin: 2rem 0;
    }
  </style>
)}
